<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T-Young OS</title>
    <link rel="stylesheet" href="https://unpkg.com/95.css">
    <style>
        body { background-color: #008080; margin: 0; padding: 20px; font-family: "Pixelated MS Sans Serif", Arial, sans-serif; height: 100vh; overflow: hidden; }
        #desktop { display: flex; flex-wrap: wrap; gap: 20px; align-content: flex-start; height: calc(100% - 40px); }
        .window { width: 300px; margin: 10px; display: inline-block; vertical-align: top; }
        .window-body img { width: 100%; height: auto; display: block; image-rendering: pixelated; border: 1px solid #000; }
        .status-bar-field { font-size: 10px; }
        /* Taskbar styling */
        .taskbar { position: fixed; bottom: 0; left: 0; width: 100%; height: 35px; background: #c0c0c0; border-top: 2px solid #fff; display: flex; align-items: center; padding: 2px; z-index: 999; }
        .start-button { font-weight: bold; display: flex; align-items: center; padding: 2px 6px; border: 2px solid; border-color: #fff #808080 #808080 #fff; cursor: pointer; }
    </style>
</head>
<body>

    <div id="desktop">
        <div class="window" id="loading-msg">
            <div class="title-bar">
                <div class="title-bar-text">System Status</div>
            </div>
            <div class="window-body">
                <p>Reading drive C:/assets/ph-nature...</p>
                <progress value="50" max="100"></progress>
            </div>
        </div>
    </div>

    <div class="taskbar">
        <div class="start-button">
            <img src="https://win95.xyz/icons/windows-0.png" style="width:16px; margin-right:5px;">
            Start
        </div>
    </div>

    <script>
        // CONFIGURATION
        const USER = 'ghxstxch';
        const REPO = 'tyoung-site';
        const FOLDER_PATH = 'assets/ph-nature';

        async function loadAssets() {
            const desktop = document.getElementById('desktop');
            const loadingMsg = document.getElementById('loading-msg');

            try {
                // Fetch file list from GitHub API
                const response = await fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/${FOLDER_PATH}`);
                const files = await response.json();

                // Clear loading message
                loadingMsg.style.display = 'none';

                if (!Array.isArray(files)) {
                    throw new Error("Folder not found or empty");
                }

                files.forEach(file => {
                    // Only process images
                    if (file.name.match(/\.(jpg|jpeg|png|gif|webp)$/i)) {
                        createWindow(file);
                    }
                });

            } catch (err) {
                loadingMsg.innerHTML = `<div class="window-body">Error: ${err.message}</div>`;
            }
        }

        function createWindow(file) {
            const desktop = document.getElementById('desktop');
            const win = document.createElement('div');
            win.className = 'window';
            
            // Build Win95 Window structure
            win.innerHTML = `
                <div class="title-bar">
                    <div class="title-bar-text">ImgViewer - ${file.name}</div>
                    <div class="title-bar-controls">
                        <button aria-label="Minimize"></button>
                        <button aria-label="Maximize"></button>
                        <button aria-label="Close"></button>
                    </div>
                </div>
                <div class="window-body">
                    <img src="${file.download_url}" alt="${file.name}">
                </div>
                <div class="status-bar">
                    <p class="status-bar-field">Type: Image</p>
                    <p class="status-bar-field">Path: C:/${file.path}</p>
                </div>
            `;
            desktop.appendChild(win);
        }

        loadAssets();
    </script>
</body>
</html>
