<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T-Young | Projects</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: #f8fafc; }
        .gallery-card { background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); transition: transform 0.2s; }
        .gallery-card:hover { transform: translateY(-4px); border-color: #38bdf8; }
    </style>
</head>
<body class="p-8 md:p-16">

    <header class="max-w-6xl mx-auto mb-16">
        <h1 class="text-4xl font-bold tracking-tight text-white mb-2">Project Assets</h1>
        <p class="text-slate-400">Automated collection of hardware and nature photography.</p>
    </header>

    <main id="gallery-container" class="max-w-6xl mx-auto space-y-16">
        <div id="loader" class="text-slate-500 animate-pulse text-lg">Scanning directories...</div>
    </main>

    <footer class="max-w-6xl mx-auto mt-20 pt-8 border-t border-slate-800 text-slate-500 text-sm">
        &copy; 2026 â€¢ Automatically synced with GitHub
    </footer>

    <script>
        const USER = 'ghxstxch';
        const REPO = 'tyoung-site';

        async function init() {
            const container = document.getElementById('gallery-container');
            const loader = document.getElementById('loader');

            try {
                // 1. Get folders in /assets
                const response = await fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/assets`);
                const items = await response.json();
                
                loader.remove();

                for (const item of items) {
                    if (item.type === 'dir') {
                        // 2. Create a section for each folder
                        const section = createSection(item.name);
                        container.appendChild(section);
                        
                        // 3. Load images for that section
                        loadImages(item.path, section.querySelector('.image-grid'));
                    }
                }
            } catch (e) {
                loader.innerText = "Error loading assets. Check repository privacy settings.";
            }
        }

        function createSection(name) {
            const section = document.createElement('section');
            section.innerHTML = `
                <h2 class="text-xl font-semibold mb-6 flex items-center gap-3 capitalize">
                    <span class="w-8 h-[2px] bg-sky-500"></span>
                    ${name.replace(/-/g, ' ')}
                </h2>
                <div class="image-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    </div>
            `;
            return section;
        }

        async function loadImages(path, grid) {
            try {
                const res = await fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/${path}`);
                const files = await res.json();

                files.forEach(file => {
                    if (file.name.match(/\.(jpg|jpeg|png|gif|webp)$/i)) {
                        const card = document.createElement('div');
                        card.className = 'gallery-card rounded-xl overflow-hidden shadow-lg';
                        card.innerHTML = `
                            <img src="${file.download_url}" alt="${file.name}" class="w-full h-48 object-cover">
                            <div class="p-4">
                                <p class="text-xs font-mono text-slate-500 truncate">${file.name}</p>
                            </div>
                        `;
                        grid.appendChild(card);
                    }
                });
            } catch (e) {
                console.error("Failed to load images for " + path);
            }
        }

        init();
    </script>
</body>
</html>